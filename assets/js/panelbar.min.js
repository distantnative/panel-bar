var hasClass=function(e,a){return new RegExp(" "+a+" ").test(" "+e.className+" ")},addClass=function(e,a){hasClass(e,a)||(e.className+=" "+a)},removeClass=function(e,a){var t=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(hasClass(e,a)){for(;t.indexOf(" "+a+" ")>=0;)t=t.replace(" "+a+" "," ");e.className=t.replace(/^\s+|\s+$/g,"")}},Panelbar=function(){var e=this;this.wrapper=document.getElementById("panelbar"),this.panelbar=document.getElementById("panelbar_bar"),this.controls=document.getElementById("panelbar_controls"),this.posBtn=this.controls.children[0],this.visBtn=this.controls.children[1],this.visible=!hasClass(this.panelbar,"panelbar__bar--hidden"),this.position=hasClass(this.wrapper,"panelbar--top")?"top":"bottom",this.map=[],this.init=function(){"querySelector"in document&&"addEventListener"in window?(e.posBtn.addEventListener("click",e.switchPosition),e.visBtn.addEventListener("click",e.switchVisibility),panelbarKEYS===!0&&(document.addEventListener("keydown",e.keys),document.addEventListener("keyup",e.keys))):(e.controls.remove(),e.panelbar.style.paddingRight=0,e.panelbar.classList.remove("panelbar--hidden"))},this.switchPosition=function(){"top"===e.position?e.bottom():e.top()},this.top=function(){removeClass(e.wrapper,"panelbar--bottom"),addClass(e.wrapper,"panelbar--top"),e.position="top"},this.bottom=function(){removeClass(e.wrapper,"panelbar--top"),addClass(e.wrapper,"panelbar--bottom"),e.position="bottom"},this.switchVisibility=function(){e.visible?e.hide():e.show()},this.show=function(){removeClass(e.wrapper,"panelbar--hidden"),e.visible=!0},this.hide=function(){addClass(e.wrapper,"panelbar--hidden"),e.visible=!1},this.keys=function(a){a=a||event,e.map[a.keyCode]="keydown"===a.type,e.map[18]&&e.map[88]?e.switchVisibility():e.map[18]&&e.map[189]?e.switchPosition():e.map[18]&&e.map[38]?e.top():e.map[18]&&e.map[40]?e.bottom():e.map[18]&&e.map[80]?(e.map=[],location.href=e.panelbar.querySelector(".panelbar--panel a").href):e.map[18]&&e.map[77]&&"undefined"!=typeof panelbarIframe&&panelbarIframe.active===!1&&e.panelbar.querySelector(".panelbar--edit a").click()}},panelbar=new Panelbar;panelbar.init();