var hasClass=function(e,t){return new RegExp(" "+t+" ").test(" "+e.className+" ")},addClass=function(e,t){hasClass(e,t)||(e.className+=" "+t)},removeClass=function(e,t){var a=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(hasClass(e,t)){for(;a.indexOf(" "+t+" ")>=0;)a=a.replace(" "+t+" "," ");e.className=a.replace(/^\s+|\s+$/g,"")}},PanelBar=function(){var e=this;this.wrapper=document.getElementById("panelbar"),this.bar=document.getElementById("panelbar_bar"),this.controls=document.getElementById("panelbar_controls"),this.posBtn=this.controls.children[0],this.visBtn=this.controls.children[1],this.visible=!hasClass(this.bar,"panelbar__bar--hidden"),this.position=hasClass(this.wrapper,"panelbar--top")?"top":"bottom",this.map=[],this.init=function(){"querySelector"in document&&"addEventListener"in window?(e.posBtn.addEventListener("click",e.switchPosition),e.visBtn.addEventListener("click",e.switchVisibility),PanelBarKEYS===!0&&(document.addEventListener("keydown",e.keys),document.addEventListener("keyup",e.keys))):(e.controls.remove(),e.bar.style.paddingRight=0,e.bar.classList.remove("panelbar--hidden"))},this.switchPosition=function(){"top"===e.position?e.bottom():e.top()},this.top=function(){removeClass(e.wrapper,"panelbar--bottom"),addClass(e.wrapper,"panelbar--top"),e.position="top"},this.bottom=function(){removeClass(e.wrapper,"panelbar--top"),addClass(e.wrapper,"panelbar--bottom"),e.position="bottom"},this.switchVisibility=function(){e.visible?e.hide():e.show()},this.show=function(){removeClass(e.wrapper,"panelbar--hidden"),e.visible=!0},this.hide=function(){addClass(e.wrapper,"panelbar--hidden"),e.visible=!1},this.keys=function(t){t=t||event,e.map[t.keyCode]="keydown"===t.type,e.map[18]&&e.map[88]?e.switchVisibility():e.map[18]&&e.map[189]?e.switchPosition():e.map[18]&&e.map[38]?e.top():e.map[18]&&e.map[40]?e.bottom():e.map[18]&&e.map[80]?(e.map=[],location.href=e.bar.querySelector(".panelbar--panel a").href):e.map[18]&&e.map[77]&&"undefined"!=typeof pbIframe&&pbIframe.active===!1&&e.bar.querySelector(".panelbar--edit a").click()},this.init()},PanelBar=new PanelBar;