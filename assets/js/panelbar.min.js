var hasClass=function(e,a){return new RegExp(" "+a+" ").test(" "+e.className+" ")},addClass=function(e,a){hasClass(e,a)||(e.className+=" "+a)},removeClass=function(e,a){var s=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(hasClass(e,a)){for(;s.indexOf(" "+a+" ")>=0;)s=s.replace(" "+a+" "," ");e.className=s.replace(/^\s+|\s+$/g,"")}},Panelbar=function(){var e=this;this.wrapper=document.getElementById("panelbar"),this.panelbar=document.getElementById("panelbar_bar"),this.controls=document.getElementById("panelbar_controls"),this.posBtn=this.controls.children[0],this.visBtn=this.controls.children[1],this.visible=!hasClass(this.panelbar,"panelbar__bar--hidden"),this.position=hasClass(this.wrapper,"panelbar--top")?"top":"bottom",this.map=[],this.resize=null,this.mobile=null,this.desktop=null,this.init=function(){"querySelector"in document&&"addEventListener"in window?(e.posBtn.addEventListener("click",e.switchPosition),e.visBtn.addEventListener("click",e.switchVisibility),e.responsive(),panelbarKEYS===!0&&(document.addEventListener("keydown",e.keys),document.addEventListener("keyup",e.keys))):(e.controls.remove(),e.panelbar.style.paddingRight=0,e.panelbar.classList.remove("panelbar--hidden"))},this.switchPosition=function(){"top"===e.position?e.bottom():e.top()},this.top=function(){removeClass(e.wrapper,"panelbar--bottom"),addClass(e.wrapper,"panelbar--top"),e.position="top"},this.bottom=function(){removeClass(e.wrapper,"panelbar--top"),addClass(e.wrapper,"panelbar--bottom"),e.position="bottom"},this.switchVisibility=function(){e.visible?e.hide():e.show()},this.show=function(){removeClass(e.wrapper,"panelbar--hidden"),e.visible=!0},this.hide=function(){addClass(e.wrapper,"panelbar--hidden"),e.visible=!1},this.responsive=function(){setTimeout(e.setupResponsive,100),setTimeout(e.setupResponsive,250),window.addEventListener("resize",e.adaptResponsive)},this.setupResponsive=function(){e.measureResponsive(),e.adaptResponsive()},this.measureResponsive=function(){removeClass(e.wrapper,"panelbar--compact"),addClass(e.wrapper,"panelbar--mobile"),e.mobile=e.widthResponsive(),removeClass(e.wrapper,"panelbar--mobile"),e.desktop=e.widthResponsive()},this.adaptResponsive=function(){e.wrapper.offsetWidth<e.mobile?(addClass(e.wrapper,"panelbar--compact"),addClass(e.wrapper,"panelbar--mobile")):e.wrapper.offsetWidth<e.desktop?(removeClass(e.wrapper,"panelbar--compact"),addClass(e.wrapper,"panelbar--mobile")):(removeClass(e.wrapper,"panelbar--compact"),removeClass(e.wrapper,"panelbar--mobile"))},this.widthResponsive=function(){var a=e.controls.offsetWidth+40,s;for(s=0;s<e.panelbar.children.length;s++)a+=e.panelbar.children[s].offsetWidth;return a},this.keys=function(a){a=a||event,e.map[a.keyCode]="keydown"===a.type,e.map[18]&&e.map[88]?e.switchVisibility():e.map[18]&&e.map[189]?e.switchPosition():e.map[18]&&e.map[38]?e.top():e.map[18]&&e.map[40]?e.bottom():e.map[18]&&e.map[80]?(e.map=[],location.href=e.panelbar.querySelector(".panelbar--panel a").href):e.map[18]&&e.map[69]?"undefined"!=typeof panelbarIframe&&panelbarIframe.active===!0?panelbarIframe.returnBtn.click():e.panelbar.querySelector(".panelbar--edit a").click():e.map[18]&&e.map[82]&&"undefined"!=typeof panelbarIframe&&panelbarIframe.active===!0&&panelbarIframe.refreshBtn.click()}},panelbar=new Panelbar;panelbar.init();