var hasClass=function(e,t){return new RegExp(" "+t+" ").test(" "+e.className+" ")},addClass=function(e,t){hasClass(e,t)||(e.className+=" "+t)},removeClass=function(e,t){var i=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(hasClass(e,t)){for(;i.indexOf(" "+t+" ")>=0;)i=i.replace(" "+t+" "," ");e.className=i.replace(/^\s+|\s+$/g,"")}},panelBarObj=function(){var e=this;this.wrapper=document.getElementById("panelBar"),this.bar=document.getElementById("panelBar_bar"),this.controls=document.getElementById("panelBar_controls"),this.posBtn=this.controls.children[0],this.visBtn=this.controls.children[1],this.visible=!hasClass(this.bar,"panelBar__bar--hidden"),this.position=hasClass(this.wrapper,"panelBar--top")?"top":"bottom",this.map=[],this.init=function(){"querySelector"in document&&"addEventListener"in window?(e.posBtn.addEventListener("click",e.switchPosition),e.visBtn.addEventListener("click",e.switchVisibility),panelBarKEYS===!0&&(document.addEventListener("keydown",e.keys),document.addEventListener("keyup",e.keys))):(e.controls.remove(),e.bar.style.paddingRight=0,removeClass(e.bar,"panelBar--hidden"))},this.pos=function(t){e.position=t?"top":"bottom",addClass(e.wrapper,"panelBar--"+e.position),removeClass(e.wrapper,"panelBar--"+(t?"bottom":"top"))},this.top=function(){e.pos(!0)},this.bottom=function(){e.pos(!1)},this.switchPosition=function(){e.pos("top"!==e.position)},this.vis=function(t){e.visible=t,window[t?"removeClass":"addClass"](e.wrapper,"panelBar--hidden")},this.show=function(){e.vis(!0)},this.hide=function(){e.vis(!1)},this.switchVisibility=function(){e.vis(!e.visible)},this.keys=function(t){t=t||event,e.map[t.keyCode]="keydown"===t.type,e.map[18]&&e.map[88]?e.switchVisibility():e.map[18]&&e.map[189]?e.switchPosition():e.map[18]&&e.map[38]?e.pos(!0):e.map[18]&&e.map[40]?e.pos(!1):e.map[18]&&e.map[80]?(e.map=[],location.href=e.bar.querySelector(".panelBar--panel a").href):e.map[18]&&e.map[77]&&"undefined"!=typeof pbIframe&&pbIframe.active===!1&&e.bar.querySelector(".panelBar--edit a").click()},this.init()},panelBar=new panelBarObj;