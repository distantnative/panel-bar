var PanelbarIframe=function(){var e=this;this.link=null,this.href=null,this.wrapper=document.querySelector(".panelbar-iframe__iframe"),this.iframe=this.wrapper.children[0],this.buttons=document.querySelector(".panelbar-iframe__btns"),this.returnBtn=document.querySelector(".js_panelbar-iframe-close"),this.refreshBtn=document.querySelector(".js_panelbar-iframe-closerefresh"),this.elements=document.querySelectorAll(".panelbar__bar > div"),this.controls=document.getElementById("panelbar_controls"),this.position=null,this.init=function(t){var r=document.querySelectorAll(t),n;for(n=0;n<r.length;n++)r[n].addEventListener("click",function(t){t.preventDefault(),e.activate(this)})},this.activate=function(t){e.link=t,e.href=e.link.href,e.position=hasClass(panelbar.wrapper,"panelbar--top")?"top":"bottom",e.clearPanelbar(),e.buildOverlay(),e.clearPosition(),e.load(),setTimeout(e.bindSubmit,500)},this.deactivate=function(){e.restorePanelbar(),e.removeOverlay(),e.restorePosition()},this.refresh=function(){location.reload()},this.load=function(t){e.iframe.src=e.href},this.buildOverlay=function(){e.buttons.style.display="inline-block",e.wrapper.style.display="block",document.body.style.overflow="hidden",e.returnBtn.addEventListener("click",e.deactivate),e.refreshBtn.addEventListener("click",e.refresh)},this.removeOverlay=function(){e.buttons.style.display="none",e.wrapper.style.display="none",document.body.style.overflow="auto",e.returnBtn.removeEventListener("click",e.deactivate),e.refreshBtn.removeEventListener("click",e.refresh)},this.clearPanelbar=function(){e._elements("none")},this.restorePanelbar=function(){e._elements("inline-block")},this._elements=function(t){var r;for(r=0;r<e.elements.length;r++)e.elements[r].style.display=t;e.controls.style.display=t},this.clearPosition=function(){removeClass(panelbar.wrapper,"panelbar--bottom"),addClass(panelbar.wrapper,"panelbar--top")},this.restorePosition=function(){removeClass(panelbar.wrapper,"panelbar--top"),addClass(panelbar.wrapper,"panelbar--"+e.position)}};if("querySelector"in document&&"addEventListener"in window){var panelbarIframe=new PanelbarIframe;panelbarIframe.init(".panelbar--add a, .panelbar--edit a, .panelbar-fileviewer__item, .panelbar-fileviewer__more")}