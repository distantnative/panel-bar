var PanelbarIframe=function(){var e=this;this.link=null,this.href=null,this.wrapper=document.querySelector(".panelbar-iframe__iframe"),this.iframe=this.wrapper.children[0],this.buttons=document.querySelector(".panelbar-iframe__btns"),this.returnBtn=document.querySelector(".js_panelbar-iframe-close"),this.refreshBtn=document.querySelector(".js_panelbar-iframe-closerefresh"),this.elements=document.querySelectorAll(".panelbar__bar > div"),this.position=null,this.init=function(t){var n=document.querySelectorAll(t.join()),r;for(r=0;r<n.length;r++)n[r].addEventListener("click",function(t){t.preventDefault(),e.activate(this)})},this.activate=function(t){e.link=t,e.href=e.link.href,e.position=panelbar.position,e.load(),e.clearPosition(),e.clearPanelbar(),e.buildOverlay()},this.deactivate=function(){e.restorePanelbar(),e.removeOverlay(),e.restorePosition(),e.unload()},this.refresh=function(){location.reload()},this.load=function(t){e.iframe.src=e.href},this.unload=function(t){e.iframe.src=""},this.buildOverlay=function(){e.buttons.style.display="inline-block",e.wrapper.style.display="block",document.body.style.overflow="hidden",e.returnBtn.addEventListener("click",e.deactivate),e.refreshBtn.addEventListener("click",e.refresh)},this.removeOverlay=function(){e.buttons.style.display="none",e.wrapper.style.display="none",document.body.style.overflow="auto",e.returnBtn.removeEventListener("click",e.deactivate),e.refreshBtn.removeEventListener("click",e.refresh)},this.clearPanelbar=function(){e._elements("none")},this.restorePanelbar=function(){e._elements("inline-block")},this._elements=function(t){var n;for(n=0;n<e.elements.length;n++)e.elements[n].style.display=t;panelbar.controls.style.display=t},this.clearPosition=function(){panelbar.top()},this.restorePosition=function(){"bottom"===e.position&&panelbar.bottom()}};if("querySelector"in document&&"addEventListener"in window){var elements=[".panelbar--add a",".panelbar--edit a",".panelbar--user a",".panelbar-fileviewer__item",".panelbar-fileviewer__more"],panelbarIframe=new PanelbarIframe;panelbarIframe.init(elements)}