var panelBarIframe=function(e){var t=this;this.active=!1,this.position=null,this.supported=!0,this.wrapper=panelBar.wrapper.querySelector(".panelBar-iframe__iframe"),this.iframe=this.wrapper.children[1],this.loading=this.wrapper.children[0],this.buttons=panelBar.bar.querySelector(".panelBar-iframe__btns"),this.returnBtn=this.buttons.children[0],this.refreshBtn=this.buttons.children[1],this.elements=panelBar.wrapper.querySelectorAll(".panelBar__bar > div"),this.init=function(){t.support()},this.add=function(e){var n=panelBar.bar.querySelectorAll(e.join()),r;for(r=0;r<n.length;r++)n[r].addEventListener("click",function(e){t.supported&&(e.preventDefault(),t.activate(this.href))})},this.support=function(){var e=document.createElement("iframe");e.style.display="none",e.id="panelBarJStestFrame",e.src=siteURL+"/panel/",document.body.appendChild(e),e.addEventListener("load",function(){document.body.removeChild(e)}),setTimeout(function(){var e=document.getElementById("panelBarJStestFrame");null===e?t.supported=!0:t.supported=!1},2500)},this.activate=function(e){t.position=panelBar.position,t.active=!0,t.load(e),t.clearPosition(),t.clearPanelbar(),t.buildOverlay()},this.deactivate=function(){t.restorePanelbar(),t.removeOverlay(),t.restorePosition(),t.unload(),t.active=!1},this.refresh=function(){location.reload()},this.load=function(e){t.iframe.src=e},this.unload=function(){t.iframe.src=""},this.buildOverlay=function(){t.buttons.style.display="inline-block",t.wrapper.style.display="block",document.body.style.overflow="hidden",addClass(panelBar.wrapper,"panelBar--iframe"),t.loading.innerHTML="Loadingâ€¦",setTimeout(function(){t.loading.innerHTML="Seems like something is blocking access to the panel inside an iframe."},3e3),t.returnBtn.addEventListener("click",t.deactivate),t.refreshBtn.addEventListener("click",t.refresh)},this.removeOverlay=function(){t.buttons.style.display="none",t.wrapper.style.display="none",document.body.style.overflow="auto",removeClass(panelBar.wrapper,"panelBar--iframe"),t.loading.innerHTML="",t.returnBtn.removeEventListener("click",t.deactivate),t.refreshBtn.removeEventListener("click",t.refresh)},this.clearPanelbar=function(){t._elements("none"),panelBar.posBtn.style.display="none",panelBar.visBtn.addEventListener("click",t.redirectClose)},this.restorePanelbar=function(){t._elements("inline-block"),panelBar.posBtn.style.display="",panelBar.visBtn.removeEventListener("click",t.redirectClose)},this._elements=function(e){var n;for(n=0;n<t.elements.length;n++)t.elements[n].style.display=e},this.redirectClose=function(){location.href=t.iframe.src,panelBar.show()},this.clearPosition=function(){panelBar.top()},this.restorePosition=function(){"bottom"===t.position&&panelBar.bottom()},this.init(e)};if("querySelector"in document&&"addEventListener"in window)var pbIframe=new panelBarIframe;