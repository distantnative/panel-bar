function sortPanelBarElements(){$(".panelBarView-element--fixed").sort(function(e,t){return $(t).find(".name").text()<$(e).find(".name").text()?1:-1}).appendTo(".panelBarView-elements")}function setPanelBarElements(){var e=generatePanelBarConfig();$.post(panelBarAPI+"set",e)}function generatePanelBarConfig(){var e={elements:[]};return panelBarList.find(":checked").each(function(){var t=$(this),a=t.parent().siblings(".controls").find(".float");e.elements.push({element:t.val(),float:"right"==a.attr("data-float")?"right":null})}),e}var panelBarList=$(".panelBarView-elements"),sortable=Sortable.create(panelBarList[0],{forceFallback:!0,filter:".panelBarView-element--fixed",chosenClass:"panelBarView-element--chosen",ghostClass:"panelBarView-element--ghost",onUpdate:setPanelBarElements});panelBarList.find("input").change(function(e){var t=$(this),a=t.parent(),n=a.parent();n.toggleClass("panelBarView-element--fixed");var l=panelBarList.find(":checked").not(t),r=l.last().parent().parent();a.siblings(".controls").find(".float").attr("data-float",t.is(":checked")?"left":""),n.insertAfter(r),t.is(":checked")||sortPanelBarElements(),setPanelBarElements()}),panelBarList.find(".float > a").click(function(e){e.preventDefault();var t=$(this);return t.parent().attr("data-float",0===t.index()?"left":"right"),setPanelBarElements(),!1}),panelBarList.prev("h2").find("a").click(function(e){return e.preventDefault(),$.post($(this).attr("href")),location.reload(),!1});